{% extends "../layout.njk" %}

{% block page_title %}
  Email notifications - {{currentService.name}} {{currentGatewayAccount.full_type}} - GOV.UK Pay
{% endblock %}

{% block side_navigation %}
  {% include "includes/side_navigation.njk" %}
{% endblock %}

{% block mainContent %}
<div class="column-two-thirds">
  <a href="{{emailNotificationsIndexLink}}" class="link-back">Back</a>
</div>
<div class="column-two-thirds">
  {% if not permissions.email_notification_toggle_update %}
    {% include "includes/settings-read-only.njk" %}
  {% endif %}

  {% if permissions.email_notification_template_read %}

  <h2 class="heading-medium">Do you want to ask users for an email address on the card payment page?</h2>

  <form id="collection-email-form" method="post" action="{{emailCollectionModeSubmitLink}}">
        <div class="form-group">
          <fieldset>
            <input id="csrf" name="csrfToken" type="hidden" value="{{csrf}}"/>
            <div class="multiple-choice">
              <input id="email-collection-mandatory-input" type="radio" name="email-collection-mode" value="{{emailCollectionModes.mandatory}}" checked>
              <label for="email-collection-mandatory-input">
                <span class="heading-small">Yes – as a mandatory field</span>
                <ul class="question-advice form-hint">
                  <li>This means users need to enter an email address to complete a payment</li>
                </ul>
              </label>
            </div>
            <div class="multiple-choice">
              <input id="email-collection-optional-input" type="radio" name="email-collection-mode" value="{{emailCollectionModes.optional}}">
              <label for="email-collection-optional-input">
                <span class="heading-small">Yes – as an optional field</span>
                <ul class="question-advice form-hint">
                  <li>This means users don’t need to enter an email address to complete a payment</li>
               </ul>
              </label>
            </div>
            <div class="multiple-choice">
              <input id="email-collection-no-input" type="radio" name="email-collection-mode" value="{{emailCollectionModes.no}}">
              <label for="email-collection-no-input"><span class="heading-small">No</span>
                <ul class="question-advice form-hint">
                  <li>This means users won’t be asked to enter an email address. You can still give GOV.UK Pay user emails via the api if you want GOV.UK Pay to send confirmation or refund emails.</li>
                </ul>
              </label>
            </div>
          </fieldset>
        </div>
        <div class="form-group call-to-action-group">
          <input type="submit" class="button" value="Save changes">
          <a id="service-name-cancel-link" href="{{emailNotificationsIndexLink}}">
              Cancel
          </a>
        </div>
      </form>

  {% endif %}

</div>
{% endblock %}
