{% extends "../layout.njk" %}

{% block page_title %}
  Email notifications - {{currentService.name}} {{currentGatewayAccount.full_type}} - GOV.UK Pay
{% endblock %}

{% block side_navigation %}
  {% include "includes/side_navigation.njk" %}
{% endblock %}

{% block mainContent %}
<div class="column-two-thirds">
  <a href="{{routes.emailNotifications.index}}" class="link-back">Back</a>
</div>
<div class="column-two-thirds">
  {% if not permissions.email_notification_toggle_update %}
    {% include "includes/settings-read-only.njk" %}
  {% endif %}

  {% if permissions.email_notification_template_read %}

  <h2 class="heading-medium">Do you want to ask users for an email address on the card payment page?</h2>

  <form id="collection-email-form" method="post" action="{{routes.emailNotifications.collection}}">
        <div class="form-group">
          <fieldset>
            <input id="csrf" name="csrfToken" type="hidden" value="{{csrf}}"/>
            <div class="multiple-choice">
              <input id="email-collection-mandatory-input" type="radio" name="email-collection-mode" value="{{emailCollectionModes.mandatory}}" {{'checked' if emailCollectionMode === 'MANDATORY' else ''}}>
              <label for="email-collection-mandatory-input">
                Yes – as a mandatory field
                <p class="form-hint">
                  Users must enter an email address to complete a payment – they can receive notifications
                </p>
              </label>
            </div>
            <div class="multiple-choice">
              <input id="email-collection-optional-input" type="radio" name="email-collection-mode" value="{{emailCollectionModes.optional}}" {{'checked' if emailCollectionMode === 'OPTIONAL' else ''}}>
              <label for="email-collection-optional-input">
                Yes – as an optional field
                <p class="form-hint">
                  Users can choose to enter an email address – if they do, they can receive notifications
               </p>
              </label>
            </div>
            <div class="multiple-choice">
              <input id="email-collection-no-input" type="radio" name="email-collection-mode" value="{{emailCollectionModes.no}}" {{'checked' if emailCollectionMode === 'OFF' else ''}}>
              <label for="email-collection-no-input">
                No
                <p class="form-hint">
                  Users do not have the option to enter an email address – they will not receive notifications
                </p>
              </label>
            </div>
          </fieldset>
        </div>
        <div class="form-group call-to-action-group">
          <input type="submit" class="button" value="Save changes">
          <a id="service-name-cancel-link" href="{{routes.emailNotifications.index}}">
              Cancel
          </a>
        </div>
      </form>

  {% endif %}

</div>
{% endblock %}
