{% extends "layout.njk" %}

{% block pageTitle %}
  Account credentials - {{currentService.name}} Smartpay - GOV.UK Pay
{% endblock %}

{% block side_navigation %}
  {% include "includes/side-navigation.njk" %}
{% endblock %}

{% block mainContent %}
<div class="govuk-grid-column-two-thirds">
  <h1 class="govuk-heading-l page-title" id="view-title">Your Smartpay notification credentials</h1>

  <form id="notification_credentials_form" method="post" action="{{ formatAccountPathsFor(routes.account.notificationCredentials.update, currentGatewayAccount.external_id, credential.external_id) }}" data-validate>
    <input id="notification-csrf" name="csrfToken" type="hidden" value="{{csrf}}" />

    {% set username %}{{lastNotificationsData.username or currentGatewayAccount.notificationCredentials.userName}}{% endset %}
    {{ govukInput({
        label: {
          text: "Username"
        },
        id: "notification-username",
        name: "username",
        classes: "govuk-input--width-20",
        type: "text",
        attributes: {
          "data-validate": "required"
        },
        value: username
      })
    }}

    {{ govukInput({
        label: {
          text: "Password"
        },
        id: "notification-password",
        name: "password",
        classes: "govuk-input--width-20",
        type: "password",
        attributes: {
          "data-validate": "required passwordLessThanTenChars"
        },
        value: lastNotificationsData.password
      })
    }}

    {{
      govukButton({
        text: "Save credentials",
        attributes: {
          id: "submitNotificationCredentials"
        }
      })
    }}
  </form>
</div>
{% endblock %}
