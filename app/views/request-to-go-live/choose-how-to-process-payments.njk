{% extends "../layout.njk" %}

{% block pageTitle %}
  Request a live account - {{ currentService.name }} - GOV.UK Pay
{% endblock %}

{% block mainContent %}
  <div class="govuk-grid-column-two-thirds">

    <span id="request-to-go-live-current-step" class="govuk-caption-l">Step 2 of 3</span>

    <form id="request-to-go-live-choose-how-to-process-payments-form" method="post"
          action="/service/{{ currentService.externalId }}/request-to-go-live/choose-how-to-process-payments" data-validate="true" >
      <input id="csrf" name="csrfToken" type="hidden" value="{{ csrf }}"/>

      {% set otherPSP %}
        {{ govukRadios({
          idPrefix: 'choose-how-to-process-payments-mode-other',
          name: 'choose-how-to-process-payments-mode-other',
          fieldset: {
            legend: {
              text: 'Which payment service provider have you procured?',
              classes: 'pay-text-grey'
            }
          },
          items: [
            {
              value: 'worldpay',
              text: 'Worldpay'
            },
            {
              value: 'smartpay',
              text: 'Smartpay'
            },
            {
              value: 'epdq',
              text: 'ePDQ'
            }
          ]
        })
        }}
      {% endset %}

      {{ govukRadios({
        idPrefix: 'choose-how-to-process-payments-mode',
        name: 'choose-how-to-process-payments-mode',
        fieldset: {
          legend: {
            text: 'How will you process payments?',
            isPageHeading: true,
            classes: 'govuk-fieldset__legend--l'
          }
        },
        items: [
          {
            value: 'stripe',
            text: 'GOV.UK Pay’s provider',
            label: {
              classes: "govuk-label--s"
            },
            hint: {
              text: 'GOV.UK Pay uses Stripe to process payments. Using Stripe means you don’t need to have your own payment service provider.'
            }
          },
          {
            value: 'gov_banking',
            text: "Government Banking's provider, Worldpay",
            label: {
              classes: "govuk-label--s"
            }
          },
          {
            value: 'other_psp',
            text: 'Other providers',
            label: {
              classes: "govuk-label--s"
            },
            conditional: {
              html: otherPSP
            },
            hint: {
              text: 'If you agreed with GOV.UK Pay before 1 August 2020 to use ePDQ, Smartpay or your own Worldpay contract, you can connect your live account to that PSP. If not, please select one of the other providers or contact GOV.UK Pay support for more info.'
            }
          }
        ]
        }) }}

      {{ govukButton({ text: "Continue" }) }}
    </form>
  </div>
{% endblock %}
