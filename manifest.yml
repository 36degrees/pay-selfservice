---
applications:
- name: selfservice
  buildpacks:
    - https://github.com/alphagov/env-map-buildpack.git#v1
    - nodejs_buildpack
  health-check-type: http
  health-check-http-endpoint: '/healthcheck'
  health-check-invocation-timeout: 5
  memory: ((memory))
  disk_quota: ((disk_quota))
  services:
    - app-catalog
  command: npm start
  env:
    NODE_ENV: production
    SESSION_ENCRYPTION_KEY: ((selfservice_session_encryption_key))
    COOKIE_MAX_AGE: '10800000'
    ANALYTICS_TRACKING_ID: ((selfservice_analytics_tracking_id))
    ANALYTICS_TRACKING_ID_XGOV: ((selfservice_analytics_tracking_id_xgov))

    # The below URLs are provisioned by the app-catalog user-provided service 
    SELFSERVICE_URL: ""
    PUBLIC_AUTH_URL: ""
    CONNECTOR_URL: ""
    PRODUCTS_URL: ""
    DIRECT_DEBIT_CONNECTOR_URL: ""
    LEDGER_URL: ""

    PRODUCTS_FRIENDLY_BASE_URI: ((products_friendly_base_uri))
    GOCARDLESS_TEST_OAUTH_BASE_URL: ((selfservice_gocardless_test_oauth_base_url))
    GOCARDLESS_LIVE_OAUTH_BASE_URL: ((selfservice_gocardless_live_oauth_base_url))
    GOCARDLESS_TEST_CLIENT_ID: ((selfservice_gocardless_test_client_id))
    GOCARDLESS_LIVE_CLIENT_ID: ((selfservice_gocardless_live_client_id))
    ZENDESK_URL: "https://govuk.zendesk.com/api/v2"
